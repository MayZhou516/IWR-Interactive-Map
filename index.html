<html>
<head>
	<script src="https://d3js.org/d3.v3.min.js"></script>
 	<!-- using v3 rather than v4 because datamaps wont operate without it -->
	<script src="http://d3js.org/topojson.v2.min.js"></script>
	<!-- // <script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script> -->
	<script src="node_modules/datamaps/dist/datamaps.world.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	<link rel="stylesheet" href="style.css" type="text/css">
	<!-- // <script src="node_modules/datamaps/dist/datamaps.usa.min.js"></script> -->
</head>
<body>
	<h1 class="header"> Ithaca Through Refugees </h1>
	<!-- <div id="arcs" style="position: relative; width: 50%; height: 90%;"></div> -->
	<div id="bubbles" class="map"></div>
	<div class="description">
		<h1> 1990 Bosnia conflict </h1>
		<p>Taking it slow, but it's not typicalHe already knows that my love is fire His heart was a stone, but then his hands roamed I turned him to gold and it took him higher Well, I'll be your daydream, I'll be your favorite things We could be beautiful Get drunk on the good life, I'll take you to paradise Say you'll never let me go Deep in my bones, I can feel you Take me back to a time only we knew Hideaway We could waste the night with an old film Smoke a little weed on the couch in the back room Hideaway Say you'll never let me go Say you'll never let me go Ah, ah, ah Ah, ah, ah Ah, ah, ah Say you'll never let me go Say you'll never let me go Say you'll never let me go Say you'll never let me go Deep in my bones, I can feel you Take me back to a time only we knew Hideaway We could waste the night with an old film Smoke a little weed on the couch in the back room Hideaway Say you'll never let me go Say you'll never let me go </p> </div>
 	<script>
// 	var arcs = new Datamap({
// 	  element: document.getElementById("arcs"),
// 	  scope: 'usa',
// 	  fills: {
// 	    defaultFill: "#ABDDA4",
// 	    win: '#0fa0fa'
// 	  },
// 	  data: {
// 	    'TX': { fillKey: 'win' },
// 	    'FL': { fillKey: 'win' },
// 	    'NC': { fillKey: 'win' },
// 	    'CA': { fillKey: 'win' },
// 	    'NY': { fillKey: 'win' },
// 	    'CO': { fillKey: 'win' }
// 	  }
// 	});

// 	// Arcs coordinates can be specified explicitly with latitude/longtitude,
// 	// or just the geographic center of the state/country.
// 	arcs.arc([
// 	  {
// 	    origin: 'CA',
// 	    destination: 'TX'
// 	  },
// 	  {
// 	    origin: 'OR',
// 	    destination: 'TX'
// 	  },
// 	  {
// 	    origin: 'NY',
// 	    destination: 'TX'
// 	  },
// 	  {
// 	      origin: {
// 	          latitude: 40.639722,
// 	          longitude: -73.778889
// 	      },
// 	      destination: {
// 	          latitude: 37.618889,
// 	          longitude: -122.375
// 	      }
// 	  },
// 	  {
// 	      origin: {
// 	          latitude: 30.194444,
// 	          longitude: -97.67
// 	      },
// 	      destination: {
// 	          latitude: 25.793333,
// 	          longitude: -80.290556
// 	      },
// 	      options: {
// 	        strokeWidth: 2,
// 	        strokeColor: 'rgba(100, 10, 200, 0.4)',
// 	        greatArc: true
// 	      }
// 	  },
// 	  {
// 	      origin: {
// 	          latitude: 39.861667,
// 	          longitude: -104.673056
// 	      },
// 	      destination: {
// 	          latitude: 35.877778,
// 	          longitude: -78.7875
// 	      }
// 	  }
// 	],  {strokeWidth: 1, arcSharpness: 1.4});




var bubble_map = new Datamap({
  element: document.getElementById("bubbles"),
  done: function(datamap) {
            datamap.svg.selectAll('.datamaps-subunit').on('click', function(geography) {
            	selectedArr=['India', 'Australia'];
            	$('#bubbles g.arc').empty();
            	// if (selectedArr.includes(geography.properties.name)){

            		console.log("Entering");
            		bubble_map.arc([
            		{
            			strokeColor: '#6AE368',
            			origin: geography.id,
            			destination: {
            				latitude: '42.4440',
            				longitude: '-76.5019'
            			}	
            		}
        			], {strokeWidth: 1, arcSharpness: 1.4});
            	// }
            	console.log(geography);
                // alert(geography.properties.name);
            });
        },
  geographyConfig: {
    popupOnHover: false,
    highlightOnHover: true,
    highlightFillColor: '#6AE368'
  },
  fills: {
    defaultFill: '#000000'
    // USA: 'blue',
    // RUS: 'red'
  }
});

bubble_map.bubbles([
  // {
  //   name: 'Not a bomb, but centered on Brazil',
  //   radius: 10,
  //   centered: 'SYR',
  //   country: 'USA',
  //   yeild: 0,
  //   fillKey: 'USA',
  //   date: '1954-03-01'
  // },
  // {
  //   name: 'Not a bomb',
  //   radius: 15,
  //   yeild: 0,
  //   country: 'USA',
  //   centered: 'USA',
  //   date: '1986-06-05',
  //   significance: 'Centered on US',
  //   fillKey: 'USA'
  // },
  // {
  //   name: 'Castle Bravo',
  //   radius: 25,
  //   yeild: 15000,
  //   country: 'USA',
  //   significance: 'First dry fusion fuel "staged" thermonuclear weapon; a serious nuclear fallout accident occurred',
  //   fillKey: 'USA',
  //   date: '1954-03-01',
  //   latitude: 11.415,
  //   longitude: 165.1619
  // },{
  //   name: 'Tsar Bomba',
  //   radius: 70,
  //   yeild: 50000,
  //   country: 'USSR',
  //   fillKey: 'RUS',
  //   significance: 'Largest thermonuclear weapon ever testedâ€”scaled down from its initial 100 Mt design by 50%',
  //   date: '1961-10-31',
  //   latitude: 73.482,
  //   longitude: 54.5854
  // }
],
 {
  popupTemplate: function(geo, data) {
    return '<div class="hoverinfo">Yield:' + data.yeild + 'Exploded on ' + data.date + ' by the '  + data.country + '<br>Significance:' + data.significance+ '';
  }
});

</script>

</body>
</html>
